# è‡ªåŠ¨åŒ–æµ‹è¯•æ–‡æ¡£

## æµ‹è¯•æ¶æ„

è¿™ä¸ªé¡¹ç›®é‡‡ç”¨äº†å®Œæ•´çš„è‡ªåŠ¨åŒ–æµ‹è¯•ç­–ç•¥ï¼ŒåŒ…å«ä¸‰ä¸ªå±‚æ¬¡ï¼š

### 1. å•å…ƒæµ‹è¯• (Vitest)
- **ç›®çš„**: æµ‹è¯•å„ä¸ªæ¨¡å—çš„ç‹¬ç«‹åŠŸèƒ½
- **æŠ€æœ¯**: Vitest + jsdom
- **ä¼˜åŠ¿**: å¿«é€Ÿã€éš”ç¦»ã€ä¸ä¾èµ–æµè§ˆå™¨

**æµ‹è¯•è¦†ç›–çš„æ¨¡å—:**
- `GameState` - æ¸¸æˆçŠ¶æ€ç®¡ç†
- `Platform` & `PlatformManager` - å¹³å°ç³»ç»Ÿ
- `Player` - ç©å®¶é€»è¾‘
- `Physics` - ç¢°æ’æ£€æµ‹å’Œç‰©ç†å¼•æ“

### 2. é›†æˆæµ‹è¯• (Playwright)
- **ç›®çš„**: æµ‹è¯•æµè§ˆå™¨ä¸­çš„å®é™…æ¸¸æˆè¡Œä¸º
- **æŠ€æœ¯**: Playwright (æ”¯æŒ Chrome, Firefox, Safari)
- **ä¼˜åŠ¿**: çœŸå®ç”¨æˆ·ç¯å¢ƒã€è·¨æµè§ˆå™¨å…¼å®¹æ€§

**æµ‹è¯•åœºæ™¯:**
- åŸºç¡€åŠŸèƒ½ (`game-basic.spec.js`)
- ç”¨æˆ·äº¤äº’ (`game-interaction.spec.js`) 
- è§†è§‰æ¸²æŸ“ (`game-visual.spec.js`)
- æ€§èƒ½æµ‹è¯• (`game-performance.spec.js`)

### 3. è§†è§‰å›å½’æµ‹è¯•
- **ç›®çš„**: ç¡®ä¿æ¸¸æˆæ¸²æŸ“æ­£ç¡®
- **æŠ€æœ¯**: Playwright Screenshots
- **ä¼˜åŠ¿**: æ£€æµ‹è§†è§‰å˜åŒ–ã€æ”¯æŒå¤šè®¾å¤‡

## è¿è¡Œæµ‹è¯•

### å®‰è£…ä¾èµ–
```bash
npm install
```

### è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
npm test
```

### å•ç‹¬è¿è¡Œå•å…ƒæµ‹è¯•
```bash
npm run test:unit          # è¿è¡Œä¸€æ¬¡
npm run test:unit:watch    # ç›‘è§†æ¨¡å¼
```

### å•ç‹¬è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
```bash
npm run test:e2e           # è¿è¡Œæ‰€æœ‰æµè§ˆå™¨
npm run test:e2e:ui        # å¯è§†åŒ–ç•Œé¢
npm run test:e2e:debug     # è°ƒè¯•æ¨¡å¼
```

### å®‰è£…Playwrightæµè§ˆå™¨
```bash
npx playwright install
```

## æµ‹è¯•ç‰¹æ€§

### å•å…ƒæµ‹è¯•ç‰¹æ€§
- âœ… æ¨¡æ‹ŸDOMç¯å¢ƒ (jsdom)
- âœ… Canvas API æ¨¡æ‹Ÿ
- âœ… å¿«é€Ÿæ‰§è¡Œ (<100ms per test)
- âœ… é«˜ä»£ç è¦†ç›–ç‡
- âœ… ç‹¬ç«‹æµ‹è¯•ï¼ˆæ— å‰¯ä½œç”¨ï¼‰

### ç«¯åˆ°ç«¯æµ‹è¯•ç‰¹æ€§
- âœ… å¤šæµè§ˆå™¨æ”¯æŒ (Chrome, Firefox, Safari)
- âœ… çœŸå®ç”¨æˆ·äº¤äº’æ¨¡æ‹Ÿ
- âœ… è‡ªåŠ¨æˆªå›¾å’Œè§†é¢‘å½•åˆ¶
- âœ… ç½‘ç»œæ¡ä»¶æ¨¡æ‹Ÿ
- âœ… ç§»åŠ¨è®¾å¤‡æµ‹è¯•
- âœ… æ€§èƒ½ç›‘æ§

### æµ‹è¯•æ•°æ®å’ŒæŠ¥å‘Š
- ğŸ“Š HTMLæµ‹è¯•æŠ¥å‘Š (playwright-report/)
- ğŸ“· å¤±è´¥æ—¶è‡ªåŠ¨æˆªå›¾
- ğŸ¥ æµ‹è¯•æ‰§è¡Œè§†é¢‘å½•åˆ¶
- ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡æ”¶é›†

## CI/CD é›†æˆ

æµ‹è¯•é…ç½®æ”¯æŒæŒç»­é›†æˆï¼š
- è‡ªåŠ¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- å¹¶è¡Œæµ‹è¯•æ‰§è¡Œ
- å¤±è´¥æ—¶é‡è¯•æœºåˆ¶
- è·¨å¹³å°å…¼å®¹æ€§

## æœ€ä½³å®è·µ

1. **æµ‹è¯•éš”ç¦»**: æ¯ä¸ªæµ‹è¯•ç‹¬ç«‹è¿è¡Œï¼Œä¸ä¾èµ–å…¶ä»–æµ‹è¯•
2. **çœŸå®åœºæ™¯**: æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸ºå’Œè¾¹ç•Œæ¡ä»¶
3. **å¿«é€Ÿåé¦ˆ**: å•å…ƒæµ‹è¯•å¿«é€Ÿæ‰§è¡Œï¼ŒåŠæ—¶å‘ç°é—®é¢˜
4. **è§†è§‰éªŒè¯**: ä½¿ç”¨æˆªå›¾ç¡®ä¿UIæ­£ç¡®æ¸²æŸ“
5. **æ€§èƒ½ç›‘æ§**: æ£€æµ‹æ€§èƒ½å›å½’å’Œå†…å­˜æ³„æ¼

è¿™å¥—æµ‹è¯•ç³»ç»Ÿç¡®ä¿äº†æ¸¸æˆçš„ç¨³å®šæ€§ã€æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒè´¨é‡ã€‚